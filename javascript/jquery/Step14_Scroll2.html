<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Step14_Scroll2.html</title>
<style>
	.spacer{
		height: 500px;
		background-color: #cecece;
	}
	.console{
		position: fixed;
		width: 100%;
		top: 0;
		left: 0; 
	}
	.console p{
		background-color: #000;
		color: #fff;
		font-size: 25px;
	}
	.loader{
		/* 이미지를 좌우로 가운데 정렬  */
		text-align: center;
		/* 하단에 고정위치에 배치 */
		position: fixed;
		bottom: 0;
		left: 0;
		width: 100%;
		/* 일단 숨겨 놓기 */
		display: none;
	}
</style>
</head>
<body>
<div class="loader"><img src="images/loader.gif" alt="로딩 이미지"></div>
<div class="console">
	<p id="sTop">0</p>
	<p id="wHeight"></p>
	<p id="dHeight"></p>
</div>
<div class="spacer"></div>
<div class="spacer"></div>
<div class="spacer"></div>
<div class="spacer"></div>
<script src="js/jquery-3.2.1.js"></script>	
<script>
	//window 에 scroll 이벤트가 일어 났을때 실행할 함수 등록
	$(window).on("scroll", function(){
		console.log("scroll!");

		//위쪽으로 스크롤된 길이 구하기 
		var scrollTop=$(window).scrollTop();
		//window 의 높이 구하기 
		var windowHeight=$(window).height();
		//document 의 높이 구하기 
		var documentHeight=$(document).height();

		//출력해보기
		$("#sTop").text("scrollTop:"+scrollTop);
		$("#wHeight").text("windowHeight:"+windowHeight);
		$("#dHeight").text("documentHeight:"+documentHeight);

		//만일 바닥 이라면 "바닥이네?" 라는 알림창을 띄워 보세요.

		var isBottom = documentHeight == scrollTop+windowHeight;
		if(isBottom){
			//로딩 이미지 보이게 하기
			$(".loader").show();
			//서버에 추가 데이터 요청하기 
			setTimeout(function(){
				//서버에서 데이터가 도착했다고 가정
				$("<div/>").addClass("spacer").appendTo("body");
				//로딩 이미지 숨기기
				$(".loader").hide();
			}, 2000); 
		}

	});
</script>
</body>
</html>